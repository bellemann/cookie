function resolveElement(e){if("string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error(`Element not found: ${e}`);return t}if(e instanceof HTMLElement)return e;throw new Error("Invalid input: must be a string selector or an HTMLElement")}function invariant(e,t){if(!e)throw new Error(t)}function createSpan(e,t){const n=document.createElement("span");return e&&(n.className=e),void 0!==t&&(n.dataset.index=t.toString()),n.style.display="inline-block",n}function createTextSpan(e,t,n,r){const o=createSpan(n,r);return o.textContent=t,e.appendChild(o),o}function splitText(e,t={}){const{splitBy:n=" ",charClass:r="split-char",wordClass:o="split-word",lineClass:s="split-line"}=t,a=resolveElement(e);invariant(Boolean(a),"Element not found");const l=a.textContent||"";a.setAttribute("aria-label",l),a.textContent="";const i={chars:[],words:[],lines:[]},c=l.split(n),p=[],h=[];c.forEach(((e,t)=>{const s=createSpan(o,t);i.words.push(s),p.push(s);if(Array.from(e).forEach(((e,t)=>{const n=createTextSpan(s,e,r,t);i.chars.push(n)})),t<c.length-1)if(" "===n){const e=document.createTextNode(" ");a.appendChild(e),h.push(e)}else{const e=createTextSpan(s,n,`${r}-delimiter`);i.chars.push(e)}}));const u=p.map(((e,t)=>({element:e,top:e.offsetTop,index:t,spacer:t<h.length?h[t]:null}))),d=[];let f=[],m=u[0]?.top??0,E=0;return u.forEach((({element:e,top:t,spacer:n})=>{t>m&&f.length>0&&(d.push({elements:f,lineIndex:E++}),f=[],m=t),f.push(e),n&&f.push(n)})),f.length>0&&d.push({elements:f,lineIndex:E}),a.textContent="",d.forEach((({elements:e,lineIndex:t})=>{const n=createSpan(s,t);i.lines.push(n),e.forEach((e=>n.appendChild(e))),a.appendChild(n)})),i}
